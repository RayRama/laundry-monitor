<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Laundry Monitor - TV Display</title>
    <link rel="stylesheet" href="/styles/main.css" />
    <link rel="stylesheet" href="/styles/monitor.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container monitor-view">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <div class="header-left">
            <h1>Laundry Monitor</h1>
            <span id="last-updated" aria-live="polite"
              >Terakhir diperbarui â€¢ --:--</span
            >
          </div>
          <div class="header-right">
            <button class="logout-btn monitor-logout-btn" title="Logout">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M16 17v-3H9v-4h7V7l5 5-5 5zM14 2c1.1 0 2 .9 2 2v2h-2V4H4v16h10v-2h2v2c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10z"
                />
              </svg>
              Logout
            </button>
          </div>
        </div>
      </header>

      <!-- Status Legend Row -->
      <div class="status-legend-row">
        <div class="legend-item">
          <div class="legend-icon ready"></div>
          <span>Tersedia</span>
        </div>
        <div class="legend-item">
          <div class="legend-icon running"></div>
          <span>Berjalan</span>
        </div>
        <div class="legend-item">
          <div class="legend-icon offline"></div>
          <span>Offline</span>
        </div>
      </div>

      <!-- Machine Grid -->
      <div class="machines-section">
        <!-- Desktop/Tablet/TV: Single Grid -->
        <div class="machines-wrap">
          <div class="parent" id="machineGrid">
            <!-- Mesin Washer (W1-W12) dan Dryer (D1-D12) akan di-render di sini -->
            <!-- Grid positions akan diatur via CSS grid-area -->
          </div>
        </div>

        <!-- Mobile: Separate Grids -->
        <div id="mobileGrids" class="mobile-grids">
          <div class="mobile-grid-section">
            <h3 class="mobile-grid-title">Washers</h3>
            <div id="washerGrid" class="parent mobile-grid"></div>
          </div>
          <div class="mobile-grid-section">
            <h3 class="mobile-grid-title">Dryers</h3>
            <div id="dryerGrid" class="parent mobile-grid"></div>
          </div>
        </div>
      </div>

      <!-- Cards Section -->
      <div class="cards" id="cards">
        <!-- ETA Card -->
        <div class="card eta-card">
          <h2>Mesin Berjalan</h2>
          <p>Teratas = hampir selesai</p>
          <div class="eta-table">
            <!-- <div class="eta-header">
              <div class="eta-col-header">Mesin</div>
              <div class="eta-col-header">Sisa Waktu</div>
            </div> -->
            <div class="eta-body" id="etaBody">
              <!-- Daftar ETA akan di-render di sini -->
            </div>
          </div>
        </div>

        <!-- Summary Card -->
        <div class="card summary-card">
          <h2>Tingkat Penggunaan</h2>
          <p
            style="
              text-align: center;
              color: var(--muted);
              margin-bottom: 1.5rem;
              font-size: 0.9rem;
            "
          >
            Persentase mesin yang sedang digunakan
          </p>
          <div class="occupation-text-display">
            <div class="occupation-item">
              <span class="occupation-label">Dryer:</span>
              <span class="occupation-rate" id="dryerOccupationRate"
                >0% occupation rate</span
              >
              <span class="occupation-details" id="dryerDetails"
                >(0 running + 0 offline out of 0 total)</span
              >
            </div>
            <div class="occupation-item">
              <span class="occupation-label">Washer:</span>
              <span class="occupation-rate" id="washerOccupationRate"
                >0% occupation rate</span
              >
              <span class="occupation-details" id="washerDetails"
                >(0 running + 0 offline out of 0 total)</span
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Machine Control Modal -->
    <div id="machineModal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">Menyalakan Mesin</h3>
          <button id="modalCloseBtn" class="modal-close-btn" aria-label="Tutup">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>

        <div class="modal-body">
          <div class="machine-info">
            <div class="machine-icon">
              <svg
                id="modalMachineIcon"
                xmlns="http://www.w3.org/2000/svg"
                width="48"
                height="48"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <!-- Default washer icon -->
                <path
                  d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8H6V4zm0 10h5v6H6v-6zm7 0h5v6h-5v-6zm0-10h5v8h-5V4z"
                />
              </svg>
            </div>
            <div class="machine-details">
              <h4 id="modalMachineLabel">W01</h4>
              <p id="modalMachineBrand">Titan</p>
              <span id="modalMachineStatus" class="status-badge ready"
                >Tersedia</span
              >
            </div>
          </div>

          <div class="duration-input">
            <label for="durationInput">Durasi (menit):</label>
            <input
              type="number"
              id="durationInput"
              class="duration-field"
              min="1"
              max="180"
              value="1"
              placeholder="Masukkan durasi dalam menit"
            />
          </div>
        </div>

        <div class="modal-footer">
          <button id="modalCancelBtn" class="btn btn-secondary">Batal</button>
          <button id="modalStartBtn" class="btn btn-primary">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path d="M8 5v14l11-7z" />
            </svg>
            Mulai Mesin
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="/scripts/auth.js"></script>
    <script src="/scripts/app.js"></script>
  </body>
</html>
